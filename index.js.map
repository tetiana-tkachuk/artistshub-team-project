{"version":3,"file":"index.js","sources":["../src/js/constant.js","../src/js/api.js","../src/js/refs.js","../src/js/render-function.js","../src/js/feedback.js","../src/js/artist-modal-helpers.js","../src/js/artist-modal-render.js","../src/js/artist-modal.js","../src/main.js"],"sourcesContent":["export const FEEDBACKS_PER_PAGE = 10;\nexport const ARTISTS_PER_PAGE = 8;\n\nexport const BASE_URL = 'https://sound-wave.b.goit.study/api';\n\nexport const API_ENDPOINTS = {\n  GENRES: '/genres',\n  ARTISTS: '/artists',\n  ARTIST_BY_ID: '/artists/',\n  FEEDBACKS: '/feedbacks',\n};\n\n","import axios from 'axios';\n\nimport { BASE_URL, API_ENDPOINTS, FEEDBACKS_PER_PAGE, ARTISTS_PER_PAGE } from './constant';\n\naxios.defaults.baseURL = BASE_URL;\n\nexport async function getFeedbacks() {\n  const { data } = await axios.get(`${API_ENDPOINTS.FEEDBACKS}?limit=${FEEDBACKS_PER_PAGE}&page=1`);\n  return data;\n}\n\nexport async function getArtists(currentPage) {\n  const {data} = await axios.get(`${API_ENDPOINTS.ARTISTS}?limit=${ARTISTS_PER_PAGE}&page=${currentPage}`);\n  return data;\n}\n\nexport async function getArtistsById(artistId) {\n  const {data} = await axios.get(`${API_ENDPOINTS.ARTIST_BY_ID}${artistId}`);\n  return data;\n}","export default {\n    feedbacksList: document.querySelector('.swiper-wrapper'),\n    // artistsList: document.querySelector('.'),\n};","import refs from './refs';\n\nexport function renderFeedbacks(feedbacks) {\n  const feedbacksMarkup = feedbacks\n    .map( ({_id, name, rating, descr}) => {\n        return `\n        <div class=\"swiper-slide\">\n          <div class=\"feedback-block\">\n            <div data-raty class=\"feedback-rating\" data-id=${_id} data-score=${rating}></div>\n            <p class=\"feedback-descr\">${descr}</p>\n            <p class=\"feedback-name\">${name}</p>\n          </div>\n        </div>`\n    })\n    .join('');\n  \n  refs.feedbacksList.insertAdjacentHTML('beforeend', feedbacksMarkup);\n}\n","// Імпорт функції - отримання відгуків з БД\nimport { getFeedbacks } from './api';\n\n// Імпорт функціі - створення розмітки для відгуків\nimport {renderFeedbacks} from './render-function';\n\n// Імпорт бібліотеки створення зірочок\nimport Raty from \"raty-js\";\nimport 'raty-js/src/raty.css';\n\n// Імпорт бібліотеки Swiper with all modules installed (bundle)\nimport Swiper from 'swiper/bundle';\n// import styles bundle\nimport 'swiper/css/bundle';\n\nasync function init() {\n  const feedbacksObject = await getFeedbacks();\n  const feedbacksArray = feedbacksObject.data;\n\n  renderFeedbacks(feedbacksArray);\n}\n\ninit();\n\n// Створення основної розмітки відгуків\nrenderFeedbacks(feedbacksArray);\n\n\n// Створення зірочок\n// =============================================================\n// Опції для бібліотеки створення зірочок\nconst ratyOption = {\n  starOn: './img/feedback-img/star-on.png',\n  starOff: './img/feedback-img/star-off.png',\n  space: false,\n  readOnly: true,\n  halfShow: false,\n  // score:3.59,\n}\n\n// Всі DOM-елементи\nconst feedbacksAll = Array.from(document.querySelectorAll('[data-raty]'));\n\n// Перебираємо масив елементів фідбеків\nfeedbacksAll.map(feedback => {\n  // Отримуємо з data-атрибута елемента числове значення рейтингу\n  const feedbackScore = Number(feedback.dataset.score);\n  // Створення для кожного відгуку піделементу - зірочки\n  const raty = new Raty(feedback, {...ratyOption, score:feedbackScore} );\n  // Ініціалізація зірочки для кожного елементу\n  raty.init();\n});\n// =============================================================\n\n\n// Створення Слайдеру відгуків\n// =============================================================\n// init Swiper:\nconst swiper = new Swiper('.swiper', {\n  // Optional parameters :\n  // Орієнтація\n  direction: 'horizontal',\n  // Прокрутка слайдів по кругу\n  loop: false,\n\n  // Navigation arrows\n  navigation: {\n    nextEl: '.swiper-button-next',\n    prevEl: '.swiper-button-prev',\n  },\n\n  // If we need pagination\n  pagination: {\n    el: '.swiper-pagination',\n  },\n\n  // And if we need scrollbar\n  scrollbar: {\n    el: '.swiper-scrollbar',\n  },\n});\n// =============================================================\n","/////////\n// These are the helper functions for artist-modal.js file\n/////////\n\nexport function convertMstoMins(ms) {\n    const minutes = Math.floor(ms / 60000);\n    const seconds = Math.floor((ms % 60000) / 1000);\n    return `${minutes}:${seconds.toString().padStart(2, '0')}`;\n  }\n  \n  export function renderActiveYears(data) {\n    if (data.intDiedYear === null) {\n      return `${data.intFormedYear} - present`;\n    }\n    return `${data.intFormedYear} - ${data.intDiedYear}`;\n  }\n  \n  export function renderBiography(data) {\n    return data.strBiographyEN.split('.').slice(0, 2).join('.') + '.';\n  }","/////////\n// These are the render functions for artist-modal.js file\n/////////\n\n\nimport { convertMstoMins, renderActiveYears, renderBiography } from './artist-modal-helpers.js';\n\nexport function renderGenres(data) {\n  return data.genres.map(genre => `\n    <li>\n      <button class=\"artist-short-info-genre-btn\">${genre}</button>\n    </li>`).join('');\n}\n\nexport function renderAlbumsList(data) {\n  const albumsList = data.albumsList;\n\n  return albumsList.map((element) => {\n    const rowMarkup = element.tracks.map((track) => {\n      const link = track.movie === null ? '' : `\n        <a href=\"${track.movie}\" target=\"_blank\" rel=\"noopener noreferrer\">\n          <svg width=\"24\" height=\"24\" fill=\"#ffffff\">\n            <use href=\"../img/sprite.svg#icon-youtube\"></use>\n          </svg>\n        </a>`;\n\n      return `\n        <tr>\n          <td>${track.strTrack}</td>\n          <td>${convertMstoMins(track.intDuration)}</td>\n          <td>${link}</td>\n        </tr>`;\n    }).join('');\n\n    return `\n      <div class=\"artist-song-table\">\n        <h3 class=\"artist-table-header\">${element.strAlbum}</h3>\n        <table>\n          <colgroup>\n            <col style=\"width: 97px\">\n            <col style=\"width: 74px\">\n            <col style=\"width: 24px\">\n          </colgroup>\n          <thead>\n            <tr><th>Track</th><th>Time</th><th>Link</th></tr>\n          </thead>\n          <tbody>${rowMarkup}</tbody>\n        </table>\n      </div>`;\n  }).join('');\n}\n\nexport function renderArtistInfo(data, modalClass) {\n  const activeYears = renderActiveYears(data);\n  const bio = renderBiography(data);\n  const genresInfo = renderGenres(data);\n  const renderedTables = renderAlbumsList(data);\n\n  modalClass.insertAdjacentHTML('beforeend', `\n    <div class=\"artist-info-wrapper\">\n      <h1 class=\"artist-name-title\">${data.strArtist}</h1>\n      <div class=\"artist-info\">\n        <img class=\"artist-img\" src=\"${data.strArtistThumb}\" alt=\"${data.strArtist} artist photo\">\n        <div class=\"artist-short-info\">\n          <div class=\"artist-short-info-grid-wrapper\">\n            <div class=\"artist-short-info-years\">\n              <h3 class=\"short-info-small-header\">Years active</h3>\n              <p class=\"short-info-small-text\">${activeYears}</p>\n            </div>\n            <div class=\"artist-short-info-sex\">\n              <h3 class=\"short-info-small-header\">Sex</h3>\n              <p class=\"short-info-small-text\">${data.strGender}</p>\n            </div>\n            <div class=\"artist-short-info-members\">\n              <h3 class=\"short-info-small-header\">Members</h3>\n              <p class=\"short-info-small-text\">${data.intMembers}</p>\n            </div>\n            <div class=\"artist-short-info-country\">\n              <h3 class=\"short-info-small-header\">Country</h3>\n              <p class=\"short-info-small-text\">${data.strCountry}</p>\n            </div>\n          </div>\n          <div class=\"artist-bio\">\n            <h3 class=\"short-info-small-header\">Biography</h3>\n            <p class=\"short-info-small-text\">${bio}</p>\n          </div>\n          <div class=\"more-bio\">\n            <button class=\"more-bio-btn\">+</button>\n          </div>\n          <div class=\"artist-short-info-genres\">\n            <ul class=\"artist-short-info-genres-list\">${genresInfo}</ul>\n          </div>\n        </div>\n      </div>\n      <div class=\"artist-albums-wrapper\">\n        <h2 class=\"artist-albums-header\">Albums</h2>\n        ${renderedTables}\n      </div>\n      <div class=\"modal-bio\">\n        <button class=\"artists-modal-bio-close-btn\">\n          <svg class=\"artists-modal-bio-close-icon\" width=\"14\" height=\"14\">\n            <use href=\"../img/sprite.svg#icon-close\"></use>\n          </svg>\n        </button>\n        <p class=\"modal-bio-text\">${data.strBiographyEN}</p>\n      </div>\n    </div>`);\n}","//////\n//This is the main artist-modal.js function\n//////\n\nimport axios from 'axios';\nimport { renderArtistInfo } from './artist-modal-render.js';\n\nconst TEMP_ID = '65ada227af9f6d155db46908';\nconst openModalBtn = document.querySelector('.tmp-open-btn');\nconst modalOverlay = document.querySelector('.modal-overlay');\nconst modalWindowCloseBtn = document.querySelector('.artists-modal-close-btn');\nconst modalClass = document.querySelector('.modal');\n\nexport async function handleOpenModal() {\n  modalOverlay.classList.add('is-open');\n  document.body.style.overflow = 'hidden';\n\n  const existing = document.querySelector('.artist-info-wrapper');\n  if (existing) existing.remove();\n\n  try {\n    const { data } = await axios.get(\n      `https://sound-wave.b.goit.study/api/artists/${TEMP_ID}/albums`\n    );\n    renderArtistInfo(data, modalClass);\n    handleModalBio();\n  } catch (error) {\n    console.error('Request failed:', error);\n  }\n}\n\nfunction handleModalClose() {\n  modalOverlay.classList.remove('is-open');\n  document.body.style.overflow = '';\n  document.querySelector('.artist-info-wrapper')?.remove();\n}\n\nfunction handleModalBio() {\n  const moreBioBtn = document.querySelector('.more-bio-btn');\n  const moreBioClass = document.querySelector('.modal-bio');\n  const closeBioBtn = document.querySelector('.artists-modal-bio-close-btn');\n\n  moreBioBtn.addEventListener('click', () => moreBioClass.classList.add('is-open'));\n  closeBioBtn.addEventListener('click', () => moreBioClass.classList.remove('is-open'));\n}\n\nopenModalBtn.addEventListener('click', handleOpenModal);\nmodalWindowCloseBtn.addEventListener('click', handleModalClose);\nmodalOverlay.addEventListener('click', (e) => {\n    if (e.target === modalOverlay) {\n      handleModalClose();\n    }\n  });\n\ndocument.addEventListener('keydown', (e) => {\n    if (e.key === 'Escape') {\n      handleModalClose();\n    }\n  });\n\n\n\n","import './js/feedback';\n\nimport './js/artist-modal.js';\n\nhandleOpenModal();\n"],"names":["FEEDBACKS_PER_PAGE","BASE_URL","API_ENDPOINTS","axios","getFeedbacks","data","refs","renderFeedbacks","feedbacks","feedbacksMarkup","_id","name","rating","descr","init","feedbacksArray","ratyOption","feedbacksAll","feedback","feedbackScore","Raty","Swiper","convertMstoMins","ms","minutes","seconds","renderActiveYears","renderBiography","renderGenres","genre","renderAlbumsList","element","rowMarkup","track","link","renderArtistInfo","modalClass","activeYears","bio","genresInfo","renderedTables","TEMP_ID","openModalBtn","modalOverlay","modalWindowCloseBtn","handleOpenModal","existing","handleModalBio","error","handleModalClose","_a","moreBioBtn","moreBioClass","closeBioBtn"],"mappings":"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"}